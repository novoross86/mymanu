Сервис qr меню для предприятий общественного питания даёт возможность заменить обычное бумажное меню на электронное.

Стек технологий:
python,  django, postgresql
Данный функционал необходимо реализовать на базе уже созданные приложений и сущностей в новой ветке проекта.

Задача сервиса предоставление функционального электронного меню на базе веб интерфейса для замены обычного бумажного.

Приложения в джанго:
Mymanu главное приложение с настройками
Dishlist основные сущности по меню категориям и местам
Basket корзина пользователя и заказы со статистикой
Users пользователи авторизация регистрация

Экраны приложения пользователя:
Dish – карточка товара
Dish – страница товара
Plасе - главный экран меню
Basket – корзина товара

Экраны приложения модератора:
Редактирование меню
Редактирования категорий
Выбор шаблона
Редактирование шаблона
Данные о организации
Профиль пользователя

Таблицы проекта:
User пользователи
Place заведения
Dishes блюда 
Category категории блюд
Basket корзины заказов
Order заказы и статистика

Типы пользователей
В сервисе есть два типа пользователей: модераторы и обычные пользователи. 

Модераторы это владельцы предприятий общественного питания которые являются клиентами сервиса. Для работы в сервисе модератор должен пройти регистрацию и завести учётную запись предприятия питания и пройти авторизацию.
Для модераторов доступна рабочая область для редактировани мобильного меню и заполнения необходимой информации.
Модератор создаёт карточку компании.
Модератор создаёт категории блюд и наполняет их блюдами и товарами предприятия.
Модератор оплачивает доступ к сервису мобильного меню.

Пользователи это посетители предприятия общественного питания принадлежащего модератору. Они переходят на страницу меню по ссылке на qr коде которые размещены на столах завеления. Ссылка индивидуальна для каждого стола заведения чтобы персонал знал к какому столу относится заказ.
Посетители никак не авторизуются, все взаимодействия со страницей хранятся в сессии пользователя.
Посетители могут просматривать все страницы мобильного меню, добавлять блюда в корзину, удалять их из корзины, менять количество блюд в корзине.
Посетители могут вызывать официанта через приложение или отправлять заказ через приложение.
Посетители могут оценивать заведения в приложении.

Что сделано:
На данный момент ряд функционала уже реализованы.  Доработки необходимо выполнять в уже имеющихся приложениях. Доработки должны быть подробно описаны как в коде так и в листе выполненных работ.

Что необходимо добавить помечено жёлтым цветом:


Функция учета событий
Действия пользователя и взаимодействие с интерфейсом логируютсы и сохраняются в сессии. Сохранение сессии в бд осуществляется функцие сохранения данных. Реализацию данной функции необходимо реализовать при помощи штатных сессий django. Использовать java skript и инструменты на фронтэнде нужно по минимуму чтобы не нагружать пользовательское приложение. Список логируемых (собираемых) дествий пользователя:
Переход по ссылке (открытие страницы)
Добавление товара в корзину
Количество добавленного товара
Цена за единицу
Общая цена
Дата и время добавления
Идентификатор сессии пользователя
Дата и время начала сессии
Номер столика

Функция сохранение данных
Сохранение данных добавленных в сессию функцие учёта событий производится функцией сохранения данных в  следующих случиях:
Закрытия страницы приложения
Закрытии сессии
Выхода со страницы приложения
Через заданный времяной интервал бездействия пользователя
Нажатии кнопки сделать заказ

При возникновении перечисленных событий функция сохраняетьданные в таблицы:
Basket
Order

Таблица Basket (хранится каждое блюдо заказа)
Блюдо dishe связанное поле с таблицей Dishe с id блюда
Количество quantity количество в заказе
Дата и время добавления заполняется автоматически
Идентификатор сессии пользователя который добавил блюдо
Цена за единицу


Таблица Oder (создать таблицу)
id_basket поле связанное с таблицей basket один ко многим
Покупок - количество покупок с карточки выборки
Кол-во товаров - количество всех позиций в заказе
Общий чек выборки - сумма всех позиций в заказе
Дата и время заполняется автоматически

.
Функция Кеширования данных
Необходимо подключить кеширование экранов:
Dish – страница товара
Plасе - главный экран меню
Главную страницу в панели приборов модератора
Страницу корзины кешировать не надо!
Кеширование желательно организовать штатными функциями django.


Страница статистики на главном экране модератора
Создать таблицу для хранения статистики. Данные по каждому заведению должны пересчитываться ежедневно один раз в день. Этоьдоджна быть отложенная процедура и проходить она должна ночью в 2 часа.
Данные по среднему чеку берутся из таблицы Order и рассчитывается медиана от всех чеков организации.
Количество блюд в заказе берутся из таблицы Order и рассчитывается медиана от количества блюд во всех заказах.
Количество чеков это сумма всех чеков из таблицы Order
Количество проданных блюд это общее количество продаж одного блюда берется из таблицы Order

Отображается на главном экране рабочей области модератора в ней отображается:

Средний чек 
Средний чек подням недели
Средний чек по столикам

Количество блюд в заказе
Количество блюд в заказе по дням недели
Количество блюд в заказе по столикам

Количество чеков
Количество чеков по дням недели
Количество чеков по столикам

Количество проданных блюд отображать 10 самых продаваемых блюд.

Все эти пункты кроме последнего нужно сделать в виде столбчатой диогоаимы в отдельном графике каждый пункт.
Графики лучше отобразить в одну строчку три подобных.


Правка url по слагу
Изменить метод формирования ссылки, заменить id во всех местах на слаги внести в соответствующие БД поле слаг


Страница создания qr кодов
В главном меню раздела модератора сделать страницу формирования qr кодов для заведения.
Модератору необходимо будет указать количество столов и в заведении и нажать кнопку сгенерировать qr код.
Функция должна выдать страницу с картинками qr кодов идущими по порядку друг под другом, номерами столов и кнопками скачать.
Имена файлов изображений должны содержать номера столов table_1.
В верху списка должна быть кнопка скачать все в архиве. При нажатии на нее все файлы с изображениями скачиваются артхтвом.
В каждом qr коде должна быть прописана ссылка на страницу меню заведения и передан номер стола в качестве переменной.


Страница выбора шаблона
На странице показаны все шаблоны меню доступные для выбора. На странице модератор может предварительно посмотреть шаблон и установить его если он понравился.


Регистрация через почту
Добавить в приложение users в функцию авторизации с подтверждением  учётной записи через электронную почту.
После регистрации пользователю на почту с нашего почтового сервера должно отправляться письмо для подтверждения данных со ссылкой на страницу подтверждения. Ссылка должна формироваться автоматически и быть активной в течении определенного заданного количества времени.
После перехода по ссылке регистрация должна быть оконченной и учётная записать пользователя становится активной.


Восстановление пароля через почту
Добавить в приложение users  функцию восстановления пароля пользователя через электронную почту указанную при регистрации. Не авторизованный пользователь при авторизации может перейти на страницу восстановления пароля и вбить свой адрес электронной почты после чего ему будет выслано письмо на указанный адрес со ссылкой на страницу смены пароля. Где он указывает дважды новый пароль и переадресовывается на страницу авторизации и заходит уже через новый пароль

Подключение базы данных Postgresql
При установке на сервер необходимо заменить базу sqlLite  на  Postgresql  и проверить ее корректную работу.

Настройка отображения данных в шаблоне
Необходимо проверить и настроить корректное отображение данных на страницах  html шаблона проекта. Сам шаблон править не нужно речь идёт именно о передаче и отображении данных из django.

Установка на сервер и настройка корректной работы
Необходимо развернуть приложение на сервере и настроить его корректную работу.

